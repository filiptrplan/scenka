---
phase: 30-simplified-logger-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/lib/validation.ts
  - src/lib/constants.ts
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can select terrain type from 8 options"
    - "User can select awkwardness from 3 options (smooth/normal/awkward)"
    - "Form validation prevents submission without required fields"
  artifacts:
    - path: src/lib/validation.ts
      provides: simplifiedClimbSchema and SimplifiedClimbInput type
      exports: ['simplifiedClimbSchema', 'SimplifiedClimbInput']
      contains: "export const simplifiedClimbSchema"
    - path: src/lib/constants.ts
      provides: TERRAIN_OPTIONS, AWKWARDNESS_OPTIONS constants
      exports: ['TERRAIN_OPTIONS', 'AWKWARDNESS_OPTIONS']
  key_links:
    - from: simplifiedClimbSchema
      to: z.enum(['Slab', 'Vert', 'Overhang', 'Roof', 'Dyno', 'Crimp', 'Sloper', 'Pinch'])
      via: "terrain_type field validation"
      pattern: "terrain_type.*z\\.enum.*Slab.*Vert"
    - from: simplifiedClimbSchema
      to: z.enum(['smooth', 'normal', 'awkward'])
      via: "awkwardness field validation"
      pattern: "awkwardness.*z\\.enum.*smooth.*normal"
---

<objective>
Create simplified validation schema and constants for the reduced-complexity logger form.

Purpose: Establish type-safe foundation for simplified logging that removes multi-select complexity while preserving core data capture.

Output: Zod schema with terrain type and 3-option awkwardness, plus supporting constants.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/REQUIREMENTS.md
@.planning/phases/30-simplified-logger-foundation/30-RESEARCH.md
@src/lib/validation.ts
@src/lib/constants.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add TERRAIN_OPTIONS and AWKWARDNESS_OPTIONS constants</name>
  <files>src/lib/constants.ts</files>
  <action>
    Add the following constants to src/lib/constants.ts after the STYLE_OPTIONS array:

    ```typescript
    export const TERRAIN_OPTIONS = ['Slab', 'Vert', 'Overhang', 'Roof', 'Dyno', 'Crimp', 'Sloper', 'Pinch'] as const
    export const AWKWARDNESS_OPTIONS = ['smooth', 'normal', 'awkward'] as const
    ```

    These define the terrain types (8 options) and simplified awkwardness (3 options) for the simplified logger form.
  </action>
  <verify>grep -n "TERRAIN_OPTIONS\|AWKWARDNESS_OPTIONS" src/lib/constants.ts returns matches</verify>
  <done>TERRAIN_OPTIONS and AWKWARDNESS_OPTIONS constants exported with correct values</done>
</task>

<task type="auto">
  <name>Task 2: Create simplifiedClimbSchema validation schema</name>
  <files>src/lib/validation.ts</files>
  <action>
    Add the following schema to src/lib/validation.ts after the climbSchema definition:

    ```typescript
    import { TERRAIN_OPTIONS, AWKWARDNESS_OPTIONS } from '@/lib/constants'

    export const simplifiedClimbSchema = z.object({
      location: z.string().min(1, 'Location is required'),
      climb_type: z.enum(['boulder', 'sport']),
      grade_scale: z.enum(['font', 'v_scale', 'color_circuit']),
      grade_value: z
        .any()
        .refine((val) => val !== undefined && val !== '', {
          message: 'You must select a grade',
        })
        .pipe(z.string()),
      hold_color: z.enum(['red', 'green', 'blue', 'yellow', 'black', 'white', 'orange', 'purple', 'pink', 'teal']).optional(),
      outcome: z.enum(['Sent', 'Fail']),
      terrain_type: z.enum(TERRAIN_OPTIONS),
      awkwardness: z.enum(AWKWARDNESS_OPTIONS),
      notes: z.string().optional(),
    })

    export type SimplifiedClimbInput = z.infer<typeof simplifiedClimbSchema>
    ```

    Key differences from climbSchema:
    - No style array field (SIMPl-06)
    - No failure_reasons array field (SIMP-07)
    - terrain_type as required enum with 8 options (SIMP-03)
    - awkwardness as 3-option enum instead of 1-5 number (SIMP-04)
  </action>
  <verify>grep -n "simplifiedClimbSchema\|SimplifiedClimbInput" src/lib/validation.ts returns matches</verify>
  <done>simplifiedClimbSchema validates all required fields without style/failure_reasons</done>
</task>

</tasks>

<verification>
1. Constants exported: TERRAIN_OPTIONS has 8 values, AWKWARDNESS_OPTIONS has 3 values
2. Schema validates: terrain_type required, awkwardness enum (smooth/normal/awkward), no style/failure_reasons
3. TypeScript compiles: SimplifiedClimbInput type inferred correctly
</verification>

<success_criteria>
- simplifiedClimbSchema validates terrain_type as required field
- simplifiedClimbSchema validates awkwardness as 3-option enum (smooth/normal/awkward)
- simplifiedClimbSchema does NOT include style or failure_reasons fields
- TERRAIN_OPTIONS constant has 8 terrain types
- AWKWARDNESS_OPTIONS constant has 3 awkwardness options
</success_criteria>

<output>
After completion, create `.planning/phases/30-simplified-logger-foundation/30-01-SUMMARY.md`
</output>
