---
phase: 04-display-polish
plan: 02
type: execute
wave: 2
depends_on: ["01"]
files_modified: []
autonomous: false
---

<objective>
Verify offline sync, mobile responsiveness, and accessibility of the hold color feature.

Purpose: Ensure the complete hold color feature (settings → logger → display) works correctly across all usage scenarios.
Output: Verified feature with confirmed offline sync, mobile responsiveness, and accessibility compliance.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-display-polish/04-01-SUMMARY.md
@src/App.tsx
@src/components/features/logger.tsx
@src/components/features/color-settings.tsx
@src/lib/syncManager.ts
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete hold color feature with settings, logger integration, and list display</what-built>
  <how-to-verify>
    ## Offline Sync Verification

    1. **Prepare offline environment:**
       - Run: pnpm dev
       - Open DevTools → Network tab
       - Check "Offline" checkbox to simulate offline mode
       - Refresh the page (should load from service worker)

    2. **Test settings offline:**
       - Navigate to Settings page
       - Toggle hold colors on/off (disable all, then enable some)
       - Verify changes persist in local state (profile updates)
       - Re-enable network: Changes should sync to Supabase automatically

    3. **Test logger offline:**
       - Navigate to home page
       - Open logger (+ button)
       - Log a new climb with hold color selected
       - Verify: Form submits, climb appears in list (with offline indicator if present)
       - Re-enable network: Check Supabase database for the climb with hold_color

    4. **Test display offline:**
       - While offline, view climb list
       - Verify: Color badges display correctly for climbs with hold_color data
       - Verify: No errors or broken UI elements

    ## Mobile Responsiveness Verification

    5. **Test on mobile viewport:**
       - Open DevTools → Device Toolbar (Cmd+Shift+M / Ctrl+Shift+M)
       - Select device: iPhone SE (375px width)
       - Navigate to Settings → Color Settings
       - Verify: 3x3 color grid fits without horizontal scroll
       - Verify: Touch targets are ≥44px (currently h-14 = 56px ✓)

    6. **Test logger color picker on mobile:**
       - Open logger on mobile viewport
       - Scroll to "Hold Color" section
       - Verify: 3-column grid layout is maintained
       - Verify: Color selection ring is clearly visible
       - Verify: No layout shift when selecting colors

    7. **Test climb list on mobile:**
       - View climb list on mobile viewport
       - Verify: Color badges don't cause layout overflow
       - Verify: Spacing is consistent between climb cards
       - Verify: Color badge is visible and aligned

    ## Accessibility Verification

    8. **Test keyboard navigation:**
       - Press Tab to navigate through color settings
       - Verify: Focus indicator visible on each color button
       - Verify: Enter/Space toggles color selection
       - Verify: Tab order is logical (left-to-right, top-to-bottom)

    9. **Test screen reader (optional but recommended):**
       - Enable VoiceOver (macOS) or NVDA (Windows)
       - Navigate to color settings
       - Verify: Color buttons announce their state ("red, enabled" or "blue, disabled")
       - Navigate to climb list
       - Verify: Color badges are announced (if meaningful, can be aria-hidden if decorative)

    10. **Test color contrast:**
        - Verify: All color buttons have adequate contrast against dark background
        - Verify: White/black colors have borders or indicators to be visible
        - Verify: Text labels are readable (font-mono uppercase style)

    ## Cross-Feature Integration

    11. **Test full flow:**
        - Enable 3 colors in settings (e.g., red, green, blue)
        - Log a climb with "red" hold color
        - Verify: Only red, green, blue show in logger color picker
        - Submit climb
        - Verify: Red badge displays in climb list
        - Disable "red" in settings
        - Verify: Existing "red" climbs still show red badge (historical data preserved)

    12. **Test edge cases:**
        - Log climb without selecting color (hold_color undefined)
        - Verify: Climb saves successfully
        - Verify: No color badge displays in list
        - Edit climb, add a color
        - Verify: Color badge appears after update
  </how-to-verify>
  <resume-signal>Type "approved" if all verifications pass, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Offline sync verified (settings, logger, display)
- [ ] Mobile responsiveness verified (375px viewport)
- [ ] Accessibility verified (keyboard navigation, color contrast)
- [ ] Full feature flow tested (settings → logger → display)
- [ ] Edge cases tested (no color, edit color, disable color)
- [ ] No console errors during testing
- [ ] User provides approval or issues are documented
</verification>

<success_criteria>

- Hold color feature works offline and syncs when online
- Mobile layout is responsive and touch-friendly
- Keyboard navigation works for color selection
- Full feature flow is smooth and intuitive
- Historical data is preserved when settings change
- User approves the feature or issues are documented
  </success_criteria>

<output>
After completion, create `.planning/phases/04-display-polish/04-02-SUMMARY.md`
</output>
