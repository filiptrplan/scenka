---
phase: 17-use-the-new-design-system-to-fix-the-ugly-toggle
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/components/ui/toggle.tsx, src/components/ui/index.ts, src/components/features/settings-page.tsx]
autonomous: true
---

<objective>
Create a custom Toggle component that matches the app's dark theme and unified design system, replacing the generic Switch component with a minimal, unobtrusive toggle that blends seamlessly into the interface.

Purpose: Fix "ugly" toggle styling to align with the app's vibe-coded design system (dark theme, minimal accents, consistent spacing).

Output: New Toggle component using cva pattern matching SelectionButton/FormSection/FormLabel styling, integrated into SettingsPage.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-use-the-new-design-system-to-fix-the-ugly-toggle/17-CONTEXT.md

# Design system patterns from Phase 14 (unified UI styles):
@src/components/ui/selection-button.tsx
@src/components/ui/form-section.tsx
@src/components/ui/form-label.tsx

# Current Switch component being replaced:
@src/components/ui/switch.tsx

# Settings page using Switch:
@src/components/features/settings-page.tsx

# Key design patterns to follow:
# - cva (class-variance-authority) pattern for variants
# - Colors: bg-white/[0.02], border-white/20, text-[#aaa] for minimal state
# - Accent color: bg-white/10 border-white/30 for active state
# - Typography: text-xs font-black uppercase tracking-wider
# - Borders: border-2 with white opacity for subtle definition
# - Spacing: px-4 py-3 for touch targets
# - Minimal/unobtrusive: blend into dark background (#09090b)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Toggle component with cva pattern</name>
  <files>src/components/ui/toggle.tsx</files>
  <action>Create new Toggle component following Phase 14 design patterns:

1. Use @radix-ui/react-switch primitives (same as Switch, but with custom styling)
2. Apply cva pattern with variants for checked/unchecked states
3. Style guidelines from CONTEXT.md and Phase 14 patterns:
   - Root: Minimal track design, blend into dark background
     * Unchecked: bg-white/[0.02] border-2 border-white/20 (subtle)
     * Checked: bg-white/10 border-2 border-white/30 (accent)
   - Thumb: Minimal circle, smooth transitions
     * Unchecked: left position, subtle white/30
     * Checked: translate to right, white/60
   - Size: h-4 w-7 track, h-3 w-4 thumb (smaller than current Switch)
   - Transitions: smooth transform and color transitions
   - Focus: minimal ring, not jarring
4. Props interface: checked (boolean), onCheckedChange (function), disabled (optional boolean)
5. Export Toggle and toggleVariants for flexibility

DO NOT reuse existing Switch component - this is a fresh design aligned with unified system.</action>
  <verify>Toggle component exports correctly with cva variants</verify>
  <done>Toggle.tsx created with minimal, dark-themed styling matching Phase 14 patterns</done>
</task>

<task type="auto">
  <name>Task 2: Export Toggle from ui/index.ts</name>
  <files>src/components/ui/index.ts</files>
  <action>Add Toggle export to src/components/ui/index.ts:

- Keep Switch export for backward compatibility (not used in current codebase but may be imported elsewhere)
- Add export: export { Toggle } from './toggle'

Order: maintain alphabetical exports order after Switch.</action>
  <verify>Toggle can be imported from @/components/ui</verify>
  <done>Toggle exported from ui/index.ts</done>
</task>

<task type="auto">
  <name>Task 3: Replace Switch with Toggle in SettingsPage</name>
  <files>src/components/features/settings-page.tsx</files>
  <action>Update src/components/features/settings-page.tsx:

1. Change import: import { Toggle } from '@/components/ui/toggle' (or from @/components/ui index)
2. Replace <Switch /> with <Toggle /> component in "Close Logger After Add" setting (around line 155)
3. Keep same props: checked and onCheckedChange unchanged
4. Remove ml-4 className if present (Toggle should handle internal spacing)

Verify the toggle appears minimal and blends into dark background - no jarring colors or borders.</action>
  <verify>pnpm typecheck passes, settings page renders without errors</verify>
  <done>SettingsPage uses new Toggle component with improved visual consistency</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] pnpm typecheck passes (no TypeScript errors)
- [ ] pnpm lint passes (no linting errors)
- [ ] SettingsPage displays toggle correctly (run pnpm dev and visit /settings)
- [ ] Toggle styling is minimal and unobtrusive (visual check: blends into dark background)
</verification>

<success_criteria>

- Toggle component created with cva pattern matching Phase 14 design system
- Toggle styling is minimal, unobtrusive, blends into dark background (#09090b)
- SettingsPage uses new Toggle instead of Switch
- No TypeScript or lint errors
- Visual consistency with other UI components (SelectionButton, FormSection, FormLabel)
</success_criteria>

<output>
After completion, create `.planning/phases/17-use-the-new-design-system-to-fix-the-ugly-toggle/17-01-SUMMARY.md`
</output>
