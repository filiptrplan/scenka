---
phase: 13-revamp-analytics-for-more-insightful-graphs
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/components/features/charts-page.tsx]
autonomous: false
---

<objective>
Revamp analytics dashboard to provide actionable training insights at a glance.

Purpose: Transform analytics from descriptive ("here's what you did") to prescriptive ("here's what you should do about it"). Replace weak charts with metrics that directly support training decisions.

Output: Updated ChartsPage with Training Priorities chart, removed Style Distribution, improved label visibility
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-revamp-analytics-for-more-insightful-graphs/13-CONTEXT.md
@.planning/phases/07-failure-analytics/07-01-SUMMARY.md
@.planning/phases/08-style-analytics/08-01-SUMMARY.md
@.planning/phases/10-completed-climbs-analytics/10-01-SUMMARY.md
@.planning/codebase/CONVENTIONS.md
@.planning/codebase/STACK.md
@src/components/features/charts-page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove Style Distribution chart from ChartsPage</name>
  <files>src/components/features/charts-page.tsx</files>
  <action>Remove the entire Style Distribution section (lines 409-460) and the allStylesData useMemo hook (lines 108-121). This chart is not useful for training decisions and should be removed to reduce visual clutter and focus on actionable insights.</action>
  <verify>pnpm typecheck passes with no errors</verify>
  <done>Style Distribution section and allStylesData hook removed from ChartsPage</done>
</task>

<task type="auto">
  <name>Task 2: Create trainingPrioritiesData useMemo hook</name>
  <files>src/components/features/charts-page.tsx</files>
  <action>Create a new useMemo hook that calculates training priorities from failure reasons. Follow the pattern of existing hooks (failureReasonsData):

1. Filter climbs to only failures (outcome === 'Fail')
2. Count each failure reason using a Map
3. Sort reasons by frequency descending
4. Calculate percentage for each reason: (reason_count / total_failures) * 100
5. Return array of { name, value, percentage } objects

Use orange-500 or amber-500 theme color to distinguish from rose-500 failure charts.

Position this hook after radarData useMemo and before sendsByGradeData useMemo for logical grouping (training priorities before sends/fails).</action>
  <verify>pnpm typecheck passes</verify>
  <done>trainingPrioritiesData hook created with name, value, and percentage fields</done>
</task>

<task type="auto">
  <name>Task 3: Add Training Priorities chart section</name>
  <files>src/components/features/charts-page.tsx</files>
  <action>Add a new chart section titled "TRAINING PRIORITIES" at the TOP of the charts (after the header, before Anti-Style). This is the most important chart and should be seen first.

Chart specifications:
- Section header with orange-500 theme color lines: "TRAINING PRIORITIES"
- Subtitle: "Work on these first"
- BarChart with trainingPrioritiesData
- Use orange-500 color (rgba(249, 115, 22, 0.8)) to indicate actionable priorities
- Show both absolute count and percentage in tooltip
- Follow existing chart styling patterns (dark theme tooltip, monospace font, 80px height)
- Position as FIRST chart in the dashboard (before Anti-Style) for immediate visibility

The tooltip should display both count and percentage to give context (e.g., "Bad Feet: 8 failures (42% of total)").</action>
  <verify>pnpm typecheck passes, pnpm build succeeds</verify>
  <done>Training Priorities chart section added as first chart in dashboard</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Updated Analytics page with Training Priorities chart (first), Anti-Style, Failure Radar, Sends by Grade, Failure Reasons, and Redemption Rate. Style Distribution removed.</what-built>
  <how-to-verify>
    1. Run: pnpm dev
    2. Visit: http://localhost:5173/analytics
    3. Verify Training Priorities chart is FIRST (top of page)
    4. Check chart shows failure reasons sorted by frequency
    5. Hover over bars and verify tooltip shows both count and percentage
    6. Verify orange-500 theme color matches design
    7. Verify Style Distribution chart is REMOVED
    8. Verify all other charts still display correctly
    9. Check mobile responsiveness - charts should be scrollable vertically
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] pnpm typecheck passes with no TypeScript errors
- [ ] pnpm build succeeds without errors
- [ ] Training Priorities chart displays correctly as first chart
- [ ] Style Distribution chart is removed
- [ ] Tooltips show both count and percentage
- [ ] All existing charts still function properly
- [ ] Mobile layout is responsive
</verification>

<success_criteria>

- Training Priorities chart is the first chart users see
- Chart clearly shows what to work on next (failure reasons by frequency with percentages)
- Style Distribution chart removed to reduce clutter
- Visual hierarchy prioritizes actionable insights over descriptive data
- All verification checks pass
  </success_criteria>

<output>
After completion, create `.planning/phases/13-revamp-analytics-for-more-insightful-graphs/13-01-SUMMARY.md`
</output>
