---
phase: 07-failure-analytics
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/components/features/charts-page.tsx]
autonomous: true
---

<objective>
Add detailed failure reasons breakdown chart showing individual failure reason frequencies to identify training focus areas.

Purpose: Provide granular insight into specific failure causes (e.g., "Pumped: 5", "Bad Feet: 8", "Fear: 2") so climbers can target weaknesses.
Output: New chart section in ChartsPage displaying failure reasons sorted by frequency with visual styling matching existing charts.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/features/charts-page.tsx
@src/types/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Failure Reasons breakdown chart to ChartsPage</name>
  <files>src/components/features/charts-page.tsx</files>
  <action>
    Add new chart section displaying individual failure reason frequencies:

    1. Create useMemo hook `failureReasonsData`:
       - Filter climbs where outcome === 'Fail'
       - For each climb, iterate through failure_reasons array
       - Count occurrences of each unique failure reason
       - Convert to array format: [{ name: 'Pumped', value: 5 }, ...]
       - Sort descending by value

    2. Add new chart section after "Sends by Grade" section:
       - Section header with "Failure Reasons" title and description
       - Subtitle: "Frequency of individual failure causes"
       - Use rose-500 theme color (matching Anti-Style)
       - BarChart component with:
         * ResponsiveContainer (height: 80)
         * XAxis with dataKey="name", axisLine=false, tickLine=false
         * YAxis with axisLine=false, tickLine=false
         * Tooltip with existing dark theme styling
         * Bar with fill="rgba(244, 63, 94, 0.8)", radius=[0,0,0,0]
       - Format X-axis labels with uppercase

    3. Maintain existing styling patterns:
       - Section structure with decorative header lines
       - White/[0.02] background, border-white/10 container
       - Hover effect: border-white/30 transition-all duration-200
       - Font-mono text for subtitles, uppercase tracking-widest

    Place before the final "Data based on logged failures" footer div.
  </action>
  <verify>
    - npm run build succeeds
    - npm run typecheck passes
    - Chart renders in dev mode (pnpm dev)
    - Failure reasons display with correct counts
    - Sorting works (highest frequency first)
  </verify>
  <done>
    New "Failure Reasons" chart section visible on Analytics page showing individual failure reasons sorted by frequency, with styling matching existing charts.
  </done>

</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] npm run typecheck passes
- [ ] New Failure Reasons chart renders correctly
- [ ] Data is accurate and sorted by frequency
- [ ] Styling matches existing chart sections
</verification>

<success_criteria>

- New Failure Reasons breakdown chart added to ChartsPage
- Chart displays individual failure reasons with counts
- Data is sorted by frequency (highest first)
- Visual styling is consistent with existing charts
- No TypeScript errors
- Build completes successfully
  </success_criteria>

<output>
After completion, create `.planning/phases/07-failure-analytics/07-01-SUMMARY.md`
</output>
