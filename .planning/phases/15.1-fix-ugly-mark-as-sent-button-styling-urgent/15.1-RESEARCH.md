# Phase 15.1: Fix Ugly Mark as Sent Button Styling - Research

**Researched:** 2026-01-17
**Domain:** UI Component Design (Button Styling)
**Confidence:** HIGH

## Summary

The "Mark as Sent" button currently uses shadcn/ui Button component with `variant="outline"` and a `className="text-[#aaa]"` hack to force styling. This approach is inconsistent with the unified design system established in Phase 14, which uses white opacity colors (white/10, white/20, white/30) with the `bg-white/[0.02]` pattern for minimal states.

The standard pattern in this codebase for secondary/inactive buttons is: `border-white/20 hover:border-white/40 bg-white/[0.02] text-[#888] hover:text-white`. The shadcn/ui Button outline variant uses CSS variables that don't match this pattern, leading to inconsistent styling.

The solution is to add a custom "ghost" variant to the Button component using cva that matches the design system patterns, then update the Mark as Sent button to use this variant.

**Primary recommendation:** Add a "ghost" variant to the existing Button component using cva pattern with white opacity colors, matching the patterns established in Phase 14 (SelectionButton, FormSection, FormLabel).

## Standard Stack

### Core
| Library | Version | Purpose | Why Standard |
|---------|---------|---------|--------------|
| shadcn/ui Button | 1.0+ | Button component | Already installed, uses cva pattern |
| class-variance-authority (cva) | 1.0+ | Variant management | Already used in button.tsx |
| @radix-ui/react-slot | 1.0+ | Slot composition | Already used by Button |

### Supporting
| Library | Version | Purpose | When to Use |
|---------|---------|---------|-------------|
| lucide-react | 0.400+ | Icons | Already used (Check icon in button) |

**Installation:**
No installation needed - all required libraries are already in the project.

## Architecture Patterns

### Design System Color Patterns (from Phase 14)

The unified design system uses white opacity colors on dark background (#09090b):

**Active/Selected State:**
- Background: `bg-white/10`
- Border: `border-white/30`
- Text: `text-white`

**Inactive/Minimal State:**
- Background: `bg-white/[0.02]`
- Border: `border-white/20`
- Text: `text-[#aaa]` or `text-[#888]`

**Hover State:**
- Border: `hover:border-white/40`
- Text: `hover:text-white` or `hover:text-black`

**Typography:**
- Labels: `text-xs font-mono text-[#666] uppercase tracking-wider`
- Selection buttons: `text-xs font-black uppercase tracking-wider`

### Pattern 1: Button with Custom Ghost Variant

**What:** Add a custom ghost variant to the existing Button component using cva

**When to use:** For secondary, minimal buttons that blend into the background (like "Mark as Sent", icon-only buttons, back buttons)

**Example:**
```typescript
// Source: src/components/ui/button.tsx (existing file)
const buttonVariants = cva(
  'inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0',
  {
    variants: {
      variant: {
        default: 'bg-primary text-primary-foreground shadow hover:bg-primary/90',
        destructive: 'bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90',
        outline:
          'border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground',
        ghost: 'border-white/20 hover:border-white/40 bg-white/[0.02] text-[#888] hover:text-white',
        secondary: 'bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80',
        link: 'text-primary underline-offset-4 hover:underline',
      },
      // ... rest of cva config
    },
  }
)
```

### Pattern 2: Existing Ghost Variant Replacement

The shadcn/ui Button already has a `ghost` variant, but it uses CSS variables:
```typescript
ghost: 'hover:bg-accent hover:text-accent-foreground'
```

We will override this to use the white opacity pattern instead.

### Anti-Patterns to Avoid

- **Don't:** Override button styling with className hacks like `className="text-[#aaa]"` - use variants instead
- **Don't:** Create a separate GhostButton component - extend the existing Button
- **Don't:** Use CSS variables that don't match the design system - use white opacity colors directly

## Don't Hand-Roll

| Problem | Don't Build | Use Instead | Why |
|---------|-------------|-------------|-----|
| Custom button styling with inline classes | Create new component or inline className | Extend Button with cva ghost variant | Maintains consistency with existing Button API, easier to maintain |
| Separate GhostButton component | New component file with same structure | Add ghost variant to existing Button | Reduces component duplication, single source of truth |

**Key insight:** The Button component already uses cva pattern for variants. Adding a custom ghost variant is the established pattern in shadcn/ui and this codebase (see SelectionButton, Toggle, FormSection all using cva).

## Common Pitfalls

### Pitfall 1: Using CSS Variables That Don't Match Theme

**What goes wrong:** The existing shadcn/ui Button outline variant uses `border`, `bg-background`, etc. which reference CSS variables that don't produce the white opacity effect needed.

**Why it happens:** shadcn/ui uses a CSS variable-based theming system, but this codebase hardcodes white opacity colors instead of using variables.

**How to avoid:** Use the established white opacity pattern (`bg-white/[0.02]`, `border-white/20`) instead of CSS variables for the ghost variant.

**Warning signs:** Buttons look different on different screens, need to manually override with className.

### Pitfall 2: Text Color Visibility

**What goes wrong:** Using `text-[#aaa]` on hover reduces visibility instead of improving it.

**Why it happens:** Inconsistent hover states (hovering over button should make it MORE visible, not less).

**How to avoid:** Use `text-[#888]` for default state and `hover:text-white` for hover state (or `text-[#aaa]` with `hover:text-white`).

**Warning signs:** Text is hard to read when hovering over button.

### Pitfall 3: Overriding Instead of Extending

**What goes wrong:** Using `className` to override Button variant styling instead of using the variant itself.

**Why it happens:** Convenience - faster to add className than to create proper variant.

**How to avoid:** Always add proper variants for custom styling. If you need a different style, create a new variant, don't override existing one.

**Warning signs:** Seeing `className` with color/border overrides on Button components.

## Code Examples

Verified patterns from codebase:

### Existing Good Examples (Icon Buttons)
```typescript
// Source: src/components/features/climb-card.tsx:89-102
<button
  onClick={() => onEditClick(climb)}
  className="p-2 text-[#666] hover:text-white hover:bg-white/10 transition-all"
  aria-label="Edit climb"
>
  <Edit className="h-4 w-4" />
</button>
<button
  onClick={() => onDeleteClick(climb)}
  className="p-2 text-[#666] hover:text-red-400 hover:bg-white/10 transition-all"
  aria-label="Delete climb"
>
  <Trash2 className="h-4 w-4" />
</button>
```

### Existing Good Examples (Button with White Opacity)
```typescript
// Source: src/App.tsx:177-196
<Button
  type="button"
  onClick={() => { void navigate('/settings') }}
  variant="outline"
  className="border-white/20 hover:border-white/40 bg-white/[0.02] text-[#888] hover:text-black"
>
  <Settings className="h-4 w-4" />
</Button>

// Source: src/components/features/onboarding-wizard.tsx:100-107
<Button
  type="button"
  variant="outline"
  onClick={handleBack}
  className="flex-1 h-14 border-white/20 hover:border-white/40 bg-white/[0.02] text-[#888] hover:text-black font-black uppercase tracking-wider"
>
  Back
</Button>
```

### Current Bad Example (Mark as Sent Button)
```typescript
// Source: src/components/features/climb-card.tsx:204-213
<Button
  type="button"
  onClick={handleMarkAsSent}
  disabled={updateClimb.isPending}
  variant="outline"
  className="text-[#aaa]"  // HACK: Doesn't match design system
>
  <Check className="h-4 w-4 mr-2" />
  {updateClimb.isPending ? 'Updating...' : 'Mark as Sent'}
</Button>
```

### Target Pattern (After Fix)
```typescript
// Source: Proposed fix to src/components/features/climb-card.tsx:204-213
<Button
  type="button"
  onClick={handleMarkAsSent}
  disabled={updateClimb.isPending}
  variant="ghost"  // Use new ghost variant
  className="text-xs font-black uppercase tracking-wider"  // Match SelectionButton typography
>
  <Check className="h-4 w-4 mr-2" />
  {updateClimb.isPending ? 'Updating...' : 'Mark as Sent'}
</Button>
```

## State of the Art

| Old Approach | Current Approach | When Changed | Impact |
|--------------|------------------|--------------|--------|
| Inline className overrides | Custom Button variants via cva | Phase 14 | Consistent styling, easier maintenance |

**Recommended pattern from Phase 14 components:**
- SelectionButton: Uses cva with selected/unselected variants
- Toggle: Uses cva with checked/unchecked variants
- FormSection: Uses hardcoded white opacity classes
- FormLabel: Uses hardcoded white opacity classes

**Design System Consistency:**
- All components use white opacity colors (white/10, white/20, white/30)
- Background pattern: `bg-white/[0.02]` for minimal/inactive
- Hover pattern: `hover:border-white/40` or `hover:text-white`
- Typography: `text-xs font-black uppercase tracking-wider` for action buttons

## Open Questions

None - all design patterns are well-established in the codebase from Phase 14.

## Sources

### Primary (HIGH confidence)
- src/components/ui/button.tsx - Existing Button component with cva pattern
- src/components/ui/selection-button.tsx - SelectionButton component with cva variants (Phase 14)
- src/components/ui/form-section.tsx - FormSection component with white opacity pattern (Phase 14)
- src/components/ui/form-label.tsx - FormLabel component with white opacity pattern (Phase 14)
- src/components/ui/toggle.tsx - Toggle component with cva variants (Phase 17)
- src/components/features/climb-card.tsx - Current Mark as Sent button implementation (lines 204-213)

### Secondary (MEDIUM confidence)
- src/App.tsx:177-196 - Good examples of white opacity button styling
- src/components/features/onboarding-wizard.tsx:100-107 - Good example of button with white opacity pattern

### Tertiary (LOW confidence)
- [Button - Shadcn UI](https://ui.shadcn.com/docs/components/button) - Standard shadcn/ui Button documentation (verified locally)
- [Customizing shadcn/ui Themes Without Breaking Updates](https://medium.com/@sureshdotariya/customizing-shadcn-ui-themes-without-breaking-updates-a3140726ca1e) - Shadcn theming patterns (verified with local code)

## Metadata

**Confidence breakdown:**
- Standard stack: HIGH - All libraries verified in package.json and codebase
- Architecture: HIGH - Design system patterns well-documented in Phase 14 files
- Pitfalls: HIGH - Identified from codebase analysis and current bad example

**Research date:** 2026-01-17
**Valid until:** 30 days (design patterns are stable)
