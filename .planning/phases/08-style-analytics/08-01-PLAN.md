---
phase: 08-style-analytics
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [src/components/features/charts-page.tsx]
autonomous: true
---

<objective>
Add Style Distribution chart showing all climbs by style (not just failed) to understand overall climbing style patterns.

Purpose: The existing Anti-Style chart only shows failure styles. This new chart reveals the complete picture of climbing style distribution, helping climbers identify their most common movement patterns regardless of outcome.

Output: New "Style Distribution" section in Analytics page with BarChart showing total count of each style across all climbs.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/codebase/CONVENTIONS.md
@.planning/phases/07-failure-analytics/07-01-SUMMARY.md
@src/components/features/charts-page.tsx
@src/types/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create allStylesData useMemo hook</name>
  <files>src/components/features/charts-page.tsx</files>
  <action>
  Add new useMemo hook `allStylesData` after `failureReasonsData` hook that:
  - Creates a Map<string, number> to count styles across ALL climbs (remove the `if (climb.outcome === 'Fail')` filter from antiStyleData pattern)
  - Iterates through climbs array, then through each climb's style array
  - Increments count for each style in the Map
  - Converts Map entries to array: Array.from(styleCount.entries()).map(([name, value]) => ({ name, value }))
  - Sorts descending by frequency: .sort((a, b) => b.value - a.value)
  - Depends on [climbs] in useMemo dependency array

  Pattern reference: Follow exact same pattern as antiStyleData and failureReasonsData hooks (lines 23-38, 91-106), but without outcome filter.
  </action>
  <verify>pnpm typecheck passes - TypeScript confirms allStylesData type matches recharts BarChart data format</verify>
  <done>allStylesData hook produces sorted array of {name, value} objects representing total count of each style across all climbs</done>
</task>

<task type="auto">
  <name>Task 2: Add Style Distribution chart section to ChartsPage</name>
  <files>src/components/features/charts-page.tsx</files>
  <action>
  Add new section after "Failure Reasons" section (around line 356) with:
  - Section container with space-y-2
  - Section header: h2 "STYLE DISTRIBUTION" with purple-500 accent lines matching Anti-Style pattern
  - Subsection div with bg-white/[0.02] border-2 border-white/10 p-6 hover:border-white/30 transition-all duration-200
  - Subtitle paragraph: text-xs font-mono text-[#666] uppercase tracking-wider "Total climbs by climbing style"
  - ResponsiveContainer div with h-80 height
  - BarChart component with data={allStylesData}, margin={{ top: 10, right: 10, left: 10, bottom: 10 }}
  - XAxis with dataKey="name", axisLine={false}, tickLine={false}, tick={{ fill: '#888', fontSize: 10, fontFamily: 'monospace' }}, tickFormatter uppercase
  - YAxis with axisLine={false}, tickLine={false}, tick={{ fill: '#888', fontSize: 10, fontFamily: 'monospace' }}
  - Tooltip with same dark theme styling as other charts (backgroundColor: '#1a1a1a', border: '2px solid rgba(255,255,255,0.2)', fontFamily: 'monospace')
  - Bar component with dataKey="value", fill="rgba(168, 85, 247, 0.8)" (purple-500 to distinguish from rose-500 failure charts), activeBar lighter shade, radius={[0, 0, 0, 0]}

  Use purple-500 theme color (rgba(168, 85, 247, 0.8)) to visually distinguish this overall style distribution from the failure-focused Anti-Style chart (rose-500).
  </action>
  <verify>pnpm typecheck passes, pnpm build succeeds</verify>
  <done>Style Distribution chart displays total count of each climbing style across all climbs with purple-500 theme color, positioned after Failure Reasons section</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] pnpm typecheck passes without errors
- [ ] pnpm build succeeds
- [ ] Style Distribution chart displays all styles sorted by frequency
- [ ] Chart uses purple-500 theme color distinct from rose-500 failure charts
- [ ] Chart follows same visual patterns as Anti-Style, Failure Radar, Sends by Grade, and Failure Reasons charts
</verification>

<success_criteria>

- allStylesData useMemo hook implemented counting styles across ALL climbs (not just failed)
- Style Distribution chart section added to Analytics page
- Chart data sorted descending by frequency to surface most common styles first
- Purple-500 theme color used for visual distinction from failure charts
- All existing charts remain functional
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/08-style-analytics/08-01-SUMMARY.md`

Summary should include:
- allStylesData hook implementation details
- Style Distribution chart styling and positioning
- Purple-500 theme color decision
- Task commits
- Files modified
