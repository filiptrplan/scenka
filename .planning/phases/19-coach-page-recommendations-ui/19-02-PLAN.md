---
phase: 19-coach-page-recommendations-ui
plan: 02
type: execute
wave: 1
depends_on: [19-01]
files_modified:
  - src/components/features/coach-page.tsx
  - src/components/features/index.ts
autonomous: true
must_haves:
  truths:
    - Coach Page displays with header "Coach" and subtitle "AI-powered training recommendations"
    - Two tabs exist: "Recommendations" and "Pattern Analysis"
    - Loading state shows while fetching recommendations
    - "Generate your first recommendations" CTA shows when no recommendations exist
    - Generate button is disabled while generating
    - Tab switching works (keyboard and click)
  artifacts:
    - path: src/components/features/coach-page.tsx
      provides: Main Coach Page component with tabs
      contains: "CoachPage", "Tabs", "TabsList", "TabsTrigger", "TabsContent"
    - path: src/components/features/index.ts
      provides: Export of CoachPage
      exports: ["CoachPage"]
  key_links:
    - from: "CoachPage"
      to: "useCoachRecommendations"
      via: "import and useQuery"
      pattern: "useCoachRecommendations\\(\\)"
    - from: "CoachPage"
      to: "useGenerateRecommendations"
      via: "import and useMutation"
      pattern: "useGenerateRecommendations\\(\\)"
    - from: "CoachPage"
      to: "useClimbs"
      via: "import for mutation input"
      pattern: "useClimbs\\(\\)"
    - from: "Generate button"
      to: "useGenerateRecommendations.mutate"
      via: "onClick handler"
      pattern: "generateRecommendations.mutate"
---

<objective>
Create CoachPage component with tabs for Recommendations and Pattern Analysis
Purpose: Main page component with navigation tabs and skeleton layout for recommendation display
Output: Working CoachPage with tabs, loading states, and empty state CTA
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/19-coach-page-recommendations-ui/19-RESEARCH.md

@src/components/features/charts-page.tsx
@src/components/features/settings-page.tsx
@src/hooks/useCoach.ts
@src/hooks/useClimbs.ts
@src/components/ui/tabs.tsx
@src/components/ui/form-section.tsx
@src/components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Create CoachPage component structure</name>
  <files>src/components/features/coach-page.tsx</files>
  <action>
Create src/components/features/coach-page.tsx with the following structure:

1. Imports:
   - useState, useEffect from 'react'
   - Tabs, TabsList, TabsTrigger, TabsContent from '@/components/ui/tabs'
   - Button from '@/components/ui/button'
   - FormSection, FormLabel from '@/components/ui/form-section'
   - useCoachRecommendations, useGenerateRecommendations from '@/hooks/useCoach'
   - useClimbs from '@/hooks/useClimbs'
   - RefreshCw icon from 'lucide-react'
   - toast from 'sonner'

2. Define CoachPage function component that:
   - Calls useCoachRecommendations() to get { data: recommendations, isLoading, error }
   - Calls useClimbs() to get climbs data (needed for regeneration)
   - Calls useGenerateRecommendations() to get mutation for regenerating

3. Handle loading state:
   - If isLoading, return centered "Loading recommendations..." text
   - Follow ChartsPage pattern for loading state structure

4. Handle error state:
   - If error, return centered error message with error.message

5. Handle empty recommendations state:
   - If recommendations is null, show:
     * Header with "Coach" title and "AI-powered training recommendations" subtitle
     * Centered "No recommendations yet" message
     * "Generate Recommendations" button (calls mutation.mutate())
     * Button disabled state while mutation.isPending
     * Button text: "Generating..." while pending

6. Create page layout:
   - bg-[#0a0a0a], text-[#f5f5f5], p-4, pb-24, max-w-2xl mx-auto, space-y-8
   - Header with border-b-2 border-white/20, pb-6
   - Title: text-5xl font-black tracking-tighter uppercase "Coach"
   - Subtitle: text-sm font-mono text-[#888] uppercase tracking-widest

7. Add Tabs component with:
   - TabsList with 2 columns (grid-cols-2), border-2 border-white/10, bg-white/[0.02]
   - TabsTrigger for "recommendations" value
   - TabsTrigger for "patterns" value
   - Use text-xs font-black uppercase tracking-wider styling

8. Create placeholder content for TabsContent:
   - Recommendations tab: FormSection with "Recommendations content placeholder" text
   - Patterns tab: FormSection with "Pattern analysis content placeholder" text

Follow the exact header pattern from ChartsPage for visual consistency.
  </action>
  <verify>
pnpm typecheck passes
</verify>
  <done>
CoachPage component created with tabs, loading states, error handling, empty state CTA, and skeleton content
</done>
</task>

<task type="auto">
  <name>Export CoachPage from features index</name>
  <files>src/components/features/index.ts</files>
  <action>
Update src/components/features/index.ts to export CoachPage:

1. Add import: export { CoachPage } from './coach-page'

Verify the file structure matches existing exports:
export { ChartsPage } from './charts-page'
export { SettingsPage } from './settings-page'
export { Logger, LoggerHandle } from './logger'
export { ClimbCard } from './climb-card'
export { ProtectedRoute } from './protected-route'
export { CoachPage } from './coach-page'
  </action>
  <verify>
pnpm typecheck passes (import from '@/components/features' works)
</verify>
  <done>
CoachPage exported from features index, can be imported in App.tsx
</done>
</task>

</tasks>

<verification>
After completion, verify:
1. TypeScript compiles without errors
2. CoachPage component structure matches ChartsPage pattern
3. Loading, error, and empty states all render correctly
4. Tabs component is properly imported and structured
5. Styling matches existing design system (bg-[#0a0a0a], uppercase headers)
</verification>

<success_criteria>
CoachPage component exists, renders with tabs, shows loading/error/empty states, ready for recommendation content implementation
</success_criteria>

<output>
After completion, create `.planning/phases/19-coach-page-recommendations-ui/19-02-SUMMARY.md`
</output>
