---
phase: 25-user-climbing-context-for-prompts
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/features/settings-page.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User can see climbing context textarea on settings page"
    - "Character count shows current length / 2000"
    - "Help text explains what context to provide and PII warning"
    - "Form validation accepts up to 2000 characters"
    - "Settings save correctly including climbing_context field"
  artifacts:
    - path: "src/components/features/settings-page.tsx"
      provides: "Settings UI with climbing context textarea"
      contains: "Textarea {...register('climbing_context')}"
  key_links:
    - from: "settings-page.tsx"
      to: "profileSchema"
      via: "zodResolver"
      pattern: "zodResolver(profileSchema)"
    - from: "watch('climbing_context')"
      to: "Character count display"
      via: "React Hook Form"
      pattern: "\\.length || 0} / 2000"
---

<objective>
Add climbing context textarea to settings page with real-time character count and help text.

Purpose: Provide UI for users to describe themselves as climbers, enhancing AI coach personalization.
Output: Updated settings page with climbing context section including textarea, character counter, and PII warning.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/RESEARCH.md
@src/components/features/settings-page.tsx
@src/lib/validation.ts
@src/types/index.ts
</context>

<tasks>

<task type="auto">
  <name>Add climbing context section to settings form</name>
  <files>src/components/features/settings-page.tsx</files>
  <action>
  Add climbing context section after "Close logger after adding climb" section (before closing FormSection tag):

  1. Import Textarea from @/components/ui/textarea
  2. Add climbingContext variable: const climbingContext = watch('climbing_context')
  3. Add to reset() defaultValues: climbing_context: profile?.climbing_context ?? ''
  4. Add new FormSection with:
     - FormLabel: "Describe Yourself as a Climber"
     - Textarea with {...register('climbing_context')}
     - Placeholder: "e.g., Intermediate boulderer working V5-V6 projects. Weak on crimps and overhangs. Train 3x/week. Goal: send my first V7 this year."
     - Classes: min-h-[120px] bg-[#1a1a1a] border-white/10 text-white placeholder:text-white/30
     - maxLength={2000}
     - Help text below textarea explaining purpose and PII warning
     - Character count: {climbingContext?.length || 0} / 2000

  Follow existing FormSection pattern from home_gym and grade_scale fields.
  Use flex justify-between for help text and character count layout.
  </action>
  <verify>
  pnpm typecheck
  </verify>
  <done>
  Settings page displays climbing context textarea with placeholder, help text, and character counter
  </done>
</task>

</tasks>

<verification>
Test settings UI:
- Navigate to settings page
- Verify climbing context section appears below existing settings
- Type text and confirm character count updates in real-time
- Verify max 2000 character limit enforced
- Save settings and confirm climbing_context persists
</verification>

<success_criteria>
1. Textarea displays with proper styling and placeholder
2. Character count shows live updates
3. Help text includes PII warning
4. Form saves climbing_context value to profile
5. Existing settings continue to work correctly
</success_criteria>

<output>
After completion, create `.planning/phases/25-user-climbing-context-for-prompts/25-02-SUMMARY.md`
</output>
