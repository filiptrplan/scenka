---
phase: 21-chat-interface
plan: 04
type: execute
wave: 2
depends_on: [21-03]
files_modified:
  - src/App.tsx
  - src/components/features/coach-page.tsx
autonomous: true
user_setup: []

must_haves:
  truths:
    - "Route /coach/chat renders ChatPage component"
    - "Navigation from coach-page to chat works via 'Ask Coach' button"
    - "Back button in chat returns to coach-page"
    - "ChatPage uses Layout wrapper for consistent styling"
  artifacts:
    - path: "src/App.tsx"
      provides: "Route configuration for /coach/chat"
      contains: "path=\"coach/chat\""
    - path: "src/components/features/coach-page.tsx"
      provides: "Navigation entry point to chat"
      contains: "navigate\\('/coach/chat'\\)"
  key_links:
    - from: "src/App.tsx"
      to: "src/components/features/chat-page.tsx"
      via: "React Router"
      pattern: "Route.*path=\"coach/chat\""
    - from: "src/components/features/coach-page.tsx"
      to: "src/App.tsx"
      via: "React Router navigate"
      pattern: "navigate\\('/coach/chat'\\)"
---

<objective>
Configure route for /coach/chat and add navigation entry points from coach-page.

Purpose: Enable navigation to chat interface from recommendations page and provide back button for navigation flow.
Output: Route configuration in App.tsx for /coach/chat and navigation links in coach-page.tsx.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md
@src/App.tsx
@src/components/features/coach-page.tsx
@src/components/features/chat-page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Configure /coach/chat route in App.tsx</name>
  <files>src/App.tsx</files>
  <action>
    Update src/App.tsx:

    1. Add ChatPage to import from '@/components/features':
       - Update: import { ChartsPage, ClimbCard, CoachPage, Logger, ProtectedRoute, SettingsPage, ChatPage } from '@/components/features'

    2. Replace placeholder route for /coach/chat with ChatPage component:
       - Find: <Route path="coach/chat" element={<div className="min-h-screen bg-[#0a0a0a] text-[#f5f5f5] p-4 pb-24"><div className="mx-auto max-w-2xl"><p className="text-center py-12 text-[#888]">Chat feature coming in Phase 21</p></div></div>} />
       - Replace with: <Route path="coach/chat" element={<ChatPage />} />

    3. Ensure route is within the Layout route's <Outlet /> structure (should already be)

    Reference existing route patterns in App.tsx for consistency (e.g., /coach route with <CoachPage />)
  </action>
  <verify>
    Check App.tsx contains Route with path="coach/chat" and element={<ChatPage />}. Check ChatPage is imported from features.
  </verify>
  <done>
    Route /coach/chat configured to render ChatPage component
  </done>
</task>

<task type="auto">
  <name>Task 2: Add navigation entry points in coach-page.tsx</name>
  <files>src/components/features/coach-page.tsx</files>
  <action>
    Update src/components/features/coach-page.tsx:

    1. Add imports:
       - Add MessageSquare, ArrowLeft from 'lucide-react'
       - Add navigate from 'react-router-dom'

    2. Add "Ask Coach" button in Recommendations tab:
       - After recommendations display, add Button with:
         - onClick={() => navigate('/coach/chat')}
         - variant: "outline"
         - className: "w-full border-white/20 hover:border-white/40 bg-white/[0.02] text-[#888] hover:text-black"
         - Content: <MessageSquare className="h-4 w-4 mr-2" /> Ask Coach a Question

    3. Add "Ask Coach" button in Pattern Analysis tab:
       - After pattern analysis display, add similar Button with same styling and onClick

    4. These buttons provide entry points to chat as required by CHAT-05

    Reference existing button patterns in coach-page.tsx for consistent styling (regenerate button pattern)
  </action>
  <verify>
    Check coach-page.tsx contains buttons with navigate('/coach/chat') on click. Check MessageSquare and ArrowLeft imports are present.
  </verify>
  <done>
    Navigation buttons added in coach-page for accessing chat interface
  </done>
</task>

</tasks>

<verification>
Overall phase checks:
- Route /coach/chat renders ChatPage component in App.tsx
- Navigation to /coach/chat works from coach-page via "Ask Coach" buttons
- Back navigation works via browser back button (uses Layout wrapper)
- ChatPage receives Layout styling (consistent with other routes)
</verification>

<success_criteria>
Route configuration and navigation flow operational between coach-page and chat interface
</success_criteria>

<output>
After completion, create `.planning/phases/21-chat-interface/21-04-SUMMARY.md`
</output>
